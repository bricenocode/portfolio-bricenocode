---
import Layout from "../layouts/Layout.astro";
import SectionContainer from "../components/SectionContainer.astro";
import About from "../components/About.astro";
import SocialPill from "../Icons/SocialPill.astro";
import InstagramIcon from "../Icons/InstagramIcon.astro";
import LinkdinIcon from "../Icons/LinkdinIcon.astro";
import GitHubIcon from "../Icons/GitHubIcon.astro";
import TechCarousel from "../components/TechCarousel.astro";
import Experience from "../components/Experience.astro";
import CardProject from "../components/CardProject.astro";
import { uiData } from "../constants/languages.js";
---

<Layout title="BRICENOCODE | Backend Software Engineer">
  <main class="w-full" id="main">
    
    <About />

    <div class="flex justify-center gap-4 flex-wrap px-4 mb-32">
      <SocialPill href="https://github.com/bricenocode/"><GitHubIcon class="size-5" /> GitHub</SocialPill>
      <SocialPill href="https://www.linkedin.com/in/bricenodev/"><LinkdinIcon class="size-5" /> LinkedIn</SocialPill>
      <SocialPill href="https://www.instagram.com/migueldbg_/"><InstagramIcon class="size-5" /> Instagram</SocialPill>
    </div>

    <section id="skills" class="w-full bg-white/[0.02] py-24 border-y border-white/5">
      <div class="max-w-5xl mx-auto px-4">
        <div class="flex flex-col items-center text-center mb-16">
          <h2 class="text-white text-3xl md:text-4xl font-black uppercase tracking-tighter">
            <span id="tech-title-white"></span> <span id="tech-title-green" class="text-green-500"></span>
          </h2>
          <div class="h-1.5 w-16 bg-green-500 mt-3 rounded-full shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
        </div>
        <TechCarousel />
      </div>
    </section>

    <SectionContainer id="experience" class="py-24 md:px-10">
      <div class="flex flex-col items-center md:items-start text-center md:text-left mb-16">
        <h2 id="title-experience" class="text-white text-3xl md:text-4xl font-black uppercase tracking-tighter"></h2>
        <div class="h-1.5 w-16 bg-green-500 mt-3 rounded-full shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
      </div>
      <Experience />
    </SectionContainer>

    <SectionContainer id="projects" class="py-24 px-6 md:px-10">
      <div class="flex flex-col items-center md:items-start text-center md:text-left mb-16">
        <h2 id="title-projects" class="text-white text-3xl md:text-4xl font-black uppercase tracking-tighter"></h2>
        <div class="h-1.5 w-16 bg-green-500 mt-3 rounded-full shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
      </div>
      <CardProject />
    </SectionContainer>

  </main>
</Layout>

<script define:vars={{ uiData }}>
  function updateIndex(lang) {
    const data = uiData[lang];
    document.getElementById('title-experience').textContent = data.sections.exp;
    document.getElementById('title-projects').textContent = data.sections.projects;
    
    const techWords = data.tech.title.split(' ');
    document.getElementById('tech-title-white').textContent = techWords[0];
    document.getElementById('tech-title-green').textContent = techWords.slice(1).join(' ');
  }

  window.addEventListener('langChanged', (e) => updateIndex(e.detail));
  updateIndex(localStorage.getItem('pref-lang') || 'en');
</script>