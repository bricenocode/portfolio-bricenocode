---
import Layout from "../layouts/Layout.astro";
import SectionContainer from "../components/SectionContainer.astro";
import About from "../components/About.astro";
import SocialPill from "../Icons/SocialPill.astro";
import InstagramIcon from "../Icons/InstagramIcon.astro";
import LinkdinIcon from "../Icons/LinkdinIcon.astro";
import GitHubIcon from "../Icons/GitHubIcon.astro";
import GmailIcon from "../Icons/GmailIcon.astro";
import TechCarousel from "../components/TechCarousel.astro";
import Experience from "../components/Experience.astro";
import CardProject from "../components/CardProject.astro";
import { uiData } from "../constants/languages.js";
---

<Layout title="BRICENOCODE | Backend Software Engineer">
  <main class="w-full" id= "main">
    
    <About />

    <div class="flex justify-center gap-4 flex-wrap px-4 mb-24">
      <SocialPill href="https://github.com/bricenocode/"><GitHubIcon class="size-5" /> GitHub</SocialPill>
      <SocialPill href="https://www.linkedin.com/in/bricenodev/"><LinkdinIcon class="size-5" /> LinkedIn</SocialPill>
      <SocialPill href="https://www.instagram.com/migueldbg_/"><InstagramIcon class="size-5" /> Instagram</SocialPill>
    </div>

    <section id = "skills" class="w-full bg-white/5 py-20 border-y border-white/5">
      <div class="max-w-5xl mx-auto px-4">
        <h2 class="text-center text-white text-3xl font-black uppercase tracking-tighter mb-12">
          <span id="tech-title-white"></span> <span id="tech-title-green" class="text-green-500"></span>
        </h2>
        <TechCarousel />
      </div>
    </section>

    <SectionContainer id="experience" class="py-20 px-10">
       <h2 id="title-experience" class="text-white text-2xl font-bold uppercase mb-12 border-b border-green-500/30 pb-4 inline-block"></h2>
       <Experience />
    </SectionContainer>

    <SectionContainer id="projects" class="py-20 px-4">
       <h2 id="title-projects" class="text-white text-2xl font-bold uppercase mb-12 border-b border-green-500/30 pb-4 inline-block"></h2>
       <CardProject />
    </SectionContainer>

  </main>
</Layout>

<script define:vars={{ uiData }}>
  function updateIndex(lang) {
    const data = uiData[lang];
    document.getElementById('title-experience').textContent = data.sections.exp;
    document.getElementById('title-projects').textContent = data.sections.projects;
    const techWords = data.tech.title.split(' ');
    document.getElementById('tech-title-white').textContent = techWords[0];
    document.getElementById('tech-title-green').textContent = techWords.slice(1).join(' ');
  }
  window.addEventListener('langChanged', (e) => updateIndex(e.detail));
  updateIndex(localStorage.getItem('pref-lang') || 'en');
</script>