---
import { uiData } from "../constants/languages.js";
---

<section id="main" class="w-full max-w-5xl mx-auto px-4 py-12">
  <div class="flex flex-col lg:flex-row items-center justify-center gap-12 lg:gap-20">
    
    <div class="w-full lg:w-1/3 flex justify-center">
      <div class="relative group">
        <div class="absolute -inset-1 bg-gradient-to-r from-green-500/20 to-emerald-700/20 rounded-3xl blur opacity-30 group-hover:opacity-60 transition duration-1000"></div>
        <div class="relative bg-slate-900 border border-white/10 rounded-3xl overflow-hidden aspect-square w-64 md:w-72 flex flex-col items-center justify-center p-6 shadow-2xl">
          <img 
            src="https://avatars.githubusercontent.com/u/147144442?v=4" 
            alt="Bricenocode Logo" 
            class="w-4/5 h-auto object-contain transition-transform duration-500 group-hover:scale-105"
          />
          <span class="mt-4 text-[10px] text-green-400 font-mono tracking-[0.3em] uppercase opacity-70 font-bold">Backend Engineer</span>
        </div>
      </div>
    </div>

    <div class="w-full lg:w-2/3 text-center lg:text-left flex flex-col items-center lg:items-start">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-500/10 border border-green-500/20 mb-6">
        <span class="flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-2 w-2 rounded-full bg-green-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
        </span>
        <span id="availability-text" class="text-green-400 text-[10px] font-bold uppercase tracking-widest"></span>
      </div>

      <h1 id="about-title" class="text-white font-extrabold text-4xl md:text-6xl mb-6 tracking-tighter leading-none"></h1>
      
      <div class="space-y-4 max-w-2xl">
        <p id="about-p1" class="text-slate-300 text-lg md:text-xl leading-relaxed"></p>
        <p id="about-p2" class="text-slate-400 text-sm md:text-base italic border-l-2 border-green-500/30 pl-4"></p>
      </div>

      <div class="flex flex-row justify-center lg:justify-start gap-10 md:gap-16 mt-10 pt-8 border-t border-white/10 w-full">
        <div class="flex flex-col items-center lg:items-start">
          <span class="text-white font-black text-3xl md:text-4xl">+2</span>
          <span id="stat-exp-label" class="text-slate-500 text-[10px] uppercase font-bold tracking-widest"></span>
        </div>
        <div class="flex flex-col items-center lg:items-start">
          <span id="stat-focus-label-large" class="text-white font-black text-3xl md:text-4xl uppercase tracking-tighter"></span>
          <span id="stat-focus-value-small" class="text-slate-500 text-[10px] uppercase font-bold tracking-widest"></span>
        </div>
      </div>

      <div class="mt-10">
        <a 
          id="download-cv" 
          href="/CV_MiguelBriceno_EN.pdf" 
          download 
          class="inline-flex items-center gap-3 px-8 py-3 bg-green-500 text-black font-black uppercase text-xs tracking-widest rounded-xl hover:bg-green-400 hover:scale-105 transition-all duration-300 shadow-lg shadow-green-500/20 group"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="size-5 transition-transform group-hover:translate-y-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <span id="cv-text">DOWNLOAD CV</span>
        </a>
      </div>

    </div>
  </div>
</section>

<script define:vars={{ uiData }}>
  const cvBtn = document.getElementById('download-cv');
  const cvText = document.getElementById('cv-text');

  function render(lang) {
    const data = uiData[lang].about;
    
    // Textos principales
    document.getElementById('availability-text').textContent = data.availability;
    document.getElementById('about-title').innerHTML = data.title.replace('Miguel Briceño', '<span class="text-green-500">Miguel Briceño</span>');
    document.getElementById('about-p1').textContent = data.description;
    document.getElementById('about-p2').textContent = data.p2;
    
    // Estadísticas
    document.getElementById('stat-exp-label').textContent = data.stats.expTitle;
    document.getElementById('stat-focus-label-large').textContent = data.stats.focusLabel;
    document.getElementById('stat-focus-value-small').textContent = data.stats.focusValue;

    // Lógica del CV con rutas directas desde /public
    cvText.textContent = data.cvBtn;
    if (lang === 'es') {
      cvBtn.setAttribute('href', '/CV_MiguelBriceno_ES.pdf');
    } else {
      cvBtn.setAttribute('href', '/CV_MiguelBriceno_EN.pdf');
    }
  }

  window.addEventListener('langChanged', (e) => render(e.detail));
  render(localStorage.getItem('pref-lang') || 'en');
</script>