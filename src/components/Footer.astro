---
import GitHubIcon from "../Icons/GitHubIcon.astro";
import GmailIcon from "../Icons/GmailIcon.astro";
import InstagramIcon from "../Icons/InstagramIcon.astro";
import LinkdinIcon from "../Icons/LinkdinIcon.astro";
import SocialPill from "../Icons/SocialPill.astro";
import { uiData } from "../constants/languages.js";

const date = new Date();
---

<footer class="w-full xl:w-[1120px] mx-auto rounded-lg shadow m-4">
  <div class="w-full max-w-screen-xl mx-auto p-4 md:py-8">
    <div class="md:flex sm:items-center sm:justify-between">
      <a href="https://github.com/bricenocode" class="flex items-center mb-4 sm:mb-0 space-x-1" target="_blank" rel="noopener">
        <img src="./3.webp" class="size-9 sm:size-16" alt="Bricenocode Logo" />
        <span class="self-center text-sm sm:text-2xl font-semibold whitespace-nowrap text-white">BRICENOCODE</span>
      </a>
      
      <ul class="flex flex-wrap items-center mb-6 text-[10px] sm:text-[15px] font-medium text-white sm:mb-0">
        <li><a href="#main" id="footer-main" class="hover:underline me-4 md:me-6"></a></li>
        <li><a href="#skills" id="footer-skills" class="hover:underline me-4 md:me-6"></a></li>
        <li><a href="#experience" id="footer-exp" class="hover:underline me-4 md:me-6"></a></li>
        <li><a href="#projects" id="footer-projects" class="hover:underline me-4 md:me-6"></a></li>
      </ul>
    </div>

    <nav class="flex gap-2 my-5 flex-wrap justify-center space-x-3">
      <SocialPill href="https://www.instagram.com/migueldbg_/"><InstagramIcon class="size-6 rounded-full" /></SocialPill>
      <SocialPill href="https://www.linkedin.com/in/bricenodev/"><LinkdinIcon class="size-6 rounded-full text-white" /></SocialPill>
      <SocialPill href="https://github.com/bricenocode"><GitHubIcon class="size-6" /></SocialPill>
    </nav>

    <hr class="my-6 border-gray-700 sm:mx-auto lg:my-8" />
    <span class="block text-sm text-gray-400 sm:text-center">
      © {date.getFullYear()}. <span id="footer-rights"></span>
    </span>
  </div>
</footer>

<script define:vars={{ uiData }}>
  function updateFooter(lang) {
    const nav = uiData[lang].nav;
    const rights = uiData[lang].footer.rights;
    
    // Corregido: Los IDs deben coincidir con los definidos arriba
    document.getElementById('footer-main').textContent = nav.home; // Usamos nav.home para el anclaje #main
    document.getElementById('footer-skills').textContent = nav.skills;
    document.getElementById('footer-exp').textContent = nav.exp;
    document.getElementById('footer-projects').textContent = nav.projects;
    document.getElementById('footer-rights').textContent = rights;
  }

  window.addEventListener('langChanged', (e) => updateFooter(e.detail));
  
  // Inicialización
  const currentLang = localStorage.getItem('pref-lang') || 'en';
  updateFooter(currentLang);
</script>