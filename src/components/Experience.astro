---
import { uiData } from "../constants/languages.js";
---
<div class="px-2 sm:px-0">
  <ol id="experience-list" class="relative border-s border-green-400/50 ml-3"></ol>
</div>

<script define:vars={{ uiData }}>
  const list = document.getElementById('experience-list');

  function render(lang) {
    const items = uiData[lang].experience;
    list.innerHTML = items.map(exp => {
      const [role, company] = exp.title.split(' | ');
      
      return `
        <li class="mb-12 ms-6 animate-fade-in group">
          <div class="absolute w-3 h-3 rounded-full mt-1.5 -start-[6.5px] border border-green-400 bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.5)]"></div>
          
          <time class="block mb-2 text-xs md:text-sm font-mono uppercase tracking-widest text-green-400/80">
            ${exp.date}
          </time>
          
          <h3 class="flex flex-col sm:flex-row sm:items-center gap-1 text-lg md:text-xl font-bold text-white mb-2">
            ${role}
            ${company ? `<span class="text-green-400 hidden sm:inline">|</span><span class="text-green-400 font-medium text-base md:text-lg">${company}</span>` : ''}
          </h3>
          
          <p class="text-sm md:text-base text-gray-400 leading-relaxed text-pretty max-w-[700px]">
            ${exp.description}
          </p>
        </li>
      `;
    }).join('');
  }

  window.addEventListener('langChanged', (e) => render(e.detail));
  render(localStorage.getItem('pref-lang') || 'en');
</script>

<style>
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out both;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>